"use client"
import { HelpCircle, Sparkles, X } from "lucide-react"
import { Button } from "@/components/ui/button"
import { Dialog, DialogContent, DialogTrigger } from "@/components/ui/dialog"
import { motion, useInView } from "framer-motion"
import { useRef, ReactNode } from "react"

interface HelpCenterDialogProps {
  open?: boolean
  onOpenChange?: (open: boolean) => void
}

function AnimatedSection({ children, className = "" }: { children: ReactNode; className?: string }) {
  const ref = useRef(null)
  const isInView = useInView(ref, { once: true, margin: "-50px", amount: 0.2 })

  return (
    <motion.div
      ref={ref}
      initial={{ opacity: 0, y: 20 }}
      animate={isInView ? { opacity: 1, y: 0 } : { opacity: 0, y: 20 }}
      transition={{ duration: 0.4, ease: "easeOut" }}
      className={className}
    >
      {children}
    </motion.div>
  )
}

export function HelpCenterDialog({ open, onOpenChange }: HelpCenterDialogProps) {
  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogTrigger asChild>
        <Button variant="outline" size="sm" className="bg-transparent text-xs md:text-sm" aria-label="Help Center">
          <HelpCircle className="h-3.5 w-3.5 md:h-4 md:w-4 md:mr-2" />
          <span className="hidden sm:inline">Help</span>
        </Button>
      </DialogTrigger>
      <DialogContent
        className="max-w-[95vw] md:max-w-5xl max-h-[90vh] overflow-y-auto p-0 gap-0 backdrop-blur-xl bg-background/95 border border-border shadow-2xl [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]"
        overlayClassName="backdrop-blur-sm bg-black/60"
        showCloseButton={false}
      >
        <div>
          {/* Header */}
          <div className="relative p-8 bg-primary text-primary-foreground overflow-hidden border-b border-border">
            <div className="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iMC4xIj48cGF0aCBkPSJNMzYgMzRjMC0yLjIxLTEuNzktNC00LTRzLTQgMS43OS00IDQgMS43OSA0IDQgNCA0LTEuNzkgNC00em0wLTEwYzAtMi4yMS0xLjc5LTQtNC00cy00IDEuNzktNCA0IDEuNzkgNCA0IDQgNC0xLjc5IDQtNHptMC0xMGMwLTIuMjEtMS43OS00LTQtNHMtNCAxLjc5LTQgNCAxLjc5IDQgNCA0IDQtMS43OSA0LTR6Ii8+PC9nPjwvZz48L3N2Zz4=')] opacity-5"></div>
            
            <button
              onClick={() => onOpenChange?.(false)}
              className="absolute top-4 right-4 p-3 rounded-full bg-primary-foreground/20 hover:bg-primary-foreground/30 backdrop-blur-sm transition-all duration-200 hover:scale-110 z-50 cursor-pointer"
              aria-label="Close"
            >
              <X className="h-6 w-6" />
            </button>

            <div className="relative z-10">
              <div className="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-primary-foreground/10 backdrop-blur-sm mb-4 border border-primary-foreground/20">
                <Sparkles className="h-8 w-8" />
              </div>
              <h2 className="text-3xl font-bold mb-2">Event RSVP Platform</h2>
              <p className="text-primary-foreground/80 text-lg">
                A modern platform for creating beautiful digital invitations with seamless RSVP management
              </p>
            </div>
          </div>

          {/* Content */}
          <motion.div 
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            transition={{ duration: 0.3 }}
            className="p-6 md:p-8 bg-background [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]"
          >
            <div className="space-y-8 pb-8">
            <AnimatedSection>
            <Section>
            <section className="bg-secondary border border-border p-4 rounded-lg">
              <h3 className="text-lg font-semibold mb-3 text-foreground">How Host Login Works</h3>
              <div className="space-y-2 text-sm text-muted-foreground">
                <p>
                  After purchasing your RSVP service, you'll receive a unique <strong>access token</strong> via Etsy
                  message or email.
                </p>
                <ul className="ml-6 list-disc space-y-1">
                  <li>
                    The token is <strong>used only once</strong> for your first login
                  </li>
                  <li>
                    During first login, the token is <strong>permanently linked to your email address</strong>
                  </li>
                  <li>After that, simply login with your email - no token needed again</li>
                  <li>Your session stays active for 24 hours for convenient access</li>
                  <li>The token cannot be reused or transferred to another email</li>
                </ul>
                <p className="mt-3">
                  <span className="font-medium">Lost access?</span> Contact support at{" "}
                  <a href="mailto:sahinturkzehra@gmail.com" className="text-foreground hover:underline">
                    sahinturkzehra@gmail.com
                  </a>
                </p>
              </div>
            </section>

            <section>
              <h3 className="text-lg font-semibold mb-3 text-foreground">Quick Start Guide</h3>
              <ul className="space-y-2 ml-6 list-disc text-sm text-muted-foreground">
                <li>Fill in your event details on the homepage</li>
                <li>Click "Create Event" to generate your invitation</li>
                <li>Share the unique RSVP link or QR code with your guests</li>
                <li>Track all responses in real-time from your Dashboard</li>
              </ul>
            </section>
            </AnimatedSection>

            <AnimatedSection>
            <section>
              <h3 className="text-lg font-semibold mb-3 text-foreground">Creating Your Event</h3>
              <div className="space-y-3">
                <div>
                  <h4 className="font-medium text-sm mb-2 text-foreground">Event Types Available:</h4>
                  <ul className="ml-6 list-disc text-sm text-muted-foreground space-y-1">
                    <li>Wedding</li>
                    <li>Engagement</li>
                    <li>Birthday Party</li>
                    <li>Baby Shower</li>
                    <li>Bridal Shower</li>
                    <li>Corporate Event</li>
                    <li>Anniversary</li>
                    <li>Graduation</li>
                    <li>Custom Event</li>
                  </ul>
                </div>
                <div>
                  <h4 className="font-medium text-sm mb-2 text-foreground">Required Information:</h4>
                  <ul className="ml-6 list-disc text-sm text-muted-foreground space-y-1">
                    <li>Event Type (choose from 9 different types)</li>
                    <li>Event Title</li>
                    <li>Date & Time</li>
                    <li>Location</li>
                    <li>Host Name</li>
                    <li>Host Email (for Dashboard access)</li>
                  </ul>
                </div>
                <div>
                  <h4 className="font-medium text-sm mb-2 text-foreground">Optional Enhancements:</h4>
                  <ul className="ml-6 list-disc text-sm text-muted-foreground space-y-1">
                    <li>Location URL (Google Maps link for easy directions)</li>
                    <li>Cover Image (up to 10MB - adds visual appeal to your invitation)</li>
                    <li>Dress Code</li>
                    <li>Program Notes or Special Instructions</li>
                  </ul>
                </div>
                <div className="bg-muted p-3 rounded-lg border border-border">
                  <p className="text-sm text-muted-foreground">
                    <span className="font-medium">Important:</span> Your host email must be valid and accessible as it's
                    required to access your Dashboard and manage your event.
                  </p>
                </div>
              </div>
            </section>

            <section>
              <h3 className="text-lg font-semibold mb-3 text-foreground">Sharing Your Invitation</h3>
              <div className="space-y-2 text-sm text-muted-foreground">
                <p>Each event gets a unique RSVP link and QR code that you can share with guests.</p>
                <p>
                  Use the "Copy Invitation Link" button in your Dashboard to easily share via WhatsApp, email, text
                  message, or social media.
                </p>
                <div className="bg-muted border border-border p-3 rounded-lg">
                  <p className="text-muted-foreground text-sm font-medium">
                    Security Note: Anyone with this link can submit RSVPs. Only share with your intended guests.
                  </p>
                </div>
              </div>
            </section>

            <section>
              <h3 className="text-lg font-semibold mb-3 text-foreground">Accessing Your Dashboard</h3>
              <div className="space-y-2 text-sm text-muted-foreground">
                <p>
                  <span className="font-medium">Method 1:</span> You'll be automatically redirected after creating your
                  event
                </p>
                <p>
                  <span className="font-medium">Method 2:</span> Use the "Host Login" tab and enter your host email and
                  access token to access your events dashboard
                </p>
                <div className="bg-muted p-3 rounded-lg border border-border">
                  <p className="text-sm text-muted-foreground">
                    <span className="font-medium">Session Duration:</span> Your login session remains active for 24
                    hours for convenient access.
                  </p>
                </div>
              </div>
            </section>

            <section>
              <h3 className="text-lg font-semibold mb-3 text-foreground">Managing Your Event</h3>
              <div className="space-y-3 text-sm text-muted-foreground">
                <p>Click "Edit Event" in your Dashboard, verify your email, and update any event details as needed.</p>
                <div>
                  <h4 className="font-medium text-sm mb-2 text-foreground">What You Can Edit:</h4>
                  <ul className="ml-6 list-disc space-y-1">
                    <li>Event Type and Title</li>
                    <li>Date, Time, and Location</li>
                    <li>Location URL</li>
                    <li>Cover Image (up to 10MB)</li>
                    <li>Dress Code</li>
                    <li>Program Notes</li>
                  </ul>
                </div>
                <div>
                  <h4 className="font-medium text-sm mb-2 text-foreground">Protected Information:</h4>
                  <ul className="ml-6 list-disc space-y-1">
                    <li>Host Name and Email (cannot be changed for security)</li>
                  </ul>
                </div>
                <div className="bg-muted p-3 rounded-lg border border-border">
                  <p className="text-sm text-muted-foreground">
                    <span className="font-medium">Good News:</span> Your RSVP link and QR code stay the same after
                    edits, and all existing guest responses are preserved.
                  </p>
                </div>
              </div>
            </section>

            <section>
              <h3 className="text-lg font-semibold mb-3 text-foreground">Tracking Guest Responses</h3>
              <div className="space-y-3 text-sm text-muted-foreground">
                <p>View comprehensive RSVP data in your Dashboard with real-time updates:</p>
                <div>
                  <h4 className="font-medium text-sm mb-2 text-foreground">Real-Time Statistics:</h4>
                  <ul className="ml-6 list-disc space-y-1">
                    <li>Total Responses Received</li>
                    <li>Attending vs. Not Attending Count</li>
                    <li>Total Guest Count (including all guests)</li>
                  </ul>
                </div>
                <div>
                  <h4 className="font-medium text-sm mb-2 text-foreground">Detailed Guest List:</h4>
                  <ul className="ml-6 list-disc space-y-1">
                    <li>Guest Name and Attendance Status</li>
                    <li>Number of Guests (1-10 per RSVP)</li>
                    <li>Contact Information (Email & Phone - optional)</li>
                    <li>Personal Messages from guests</li>
                    <li>Submission Timestamp</li>
                    <li>Delete Option (for managing responses)</li>
                  </ul>
                </div>
                <div className="bg-muted p-3 rounded-lg border border-border">
                  <p className="text-sm text-muted-foreground">
                    <span className="font-medium">Live Updates:</span> Your dashboard automatically updates when new
                    RSVPs are submitted - no page refresh needed!
                  </p>
                </div>
              </div>
            </section>

            <section>
              <h3 className="text-lg font-semibold mb-3 text-foreground">Guest RSVP Experience</h3>
              <div className="space-y-2 text-sm text-muted-foreground">
                <p>When guests visit your invitation link, they can:</p>
                <ul className="ml-6 list-disc space-y-1">
                  <li>View all event details including date, time, location, and dress code</li>
                  <li>See the cover image if you uploaded one</li>
                  <li>Click "View on Map" to get directions to your location</li>
                  <li>Add the event to their calendar with one click</li>
                  <li>Switch between light and dark themes</li>
                  <li>Submit their RSVP with name, contact info, and attendance status</li>
                  <li>Specify number of guests (1-10 people)</li>
                  <li>Leave a message or note dietary restrictions</li>
                </ul>
              </div>
            </section>

            <section>
              <h3 className="text-lg font-semibold mb-3 text-foreground">QR Code Feature</h3>
              <div className="space-y-2 text-sm text-muted-foreground">
                <p>
                  Access your event's QR code via the "View QR Code" button in your Dashboard. Download it in two
                  formats:
                </p>
                <ul className="ml-6 list-disc space-y-1">
                  <li>
                    <span className="font-medium">JPG Format:</span> Ready-to-use QR code image for printing on physical
                    invitations, event signage, posters, or sharing digitally
                  </li>
                  <li>
                    <span className="font-medium">SVG Format (for Canva):</span> Editable vector QR code that you can
                    import into Canva and customize with different colors, sizes, backgrounds, and design elements to
                    match your event theme
                  </li>
                </ul>
                <p>Guests can scan the QR code with their smartphone camera to instantly access the RSVP form.</p>
                <div className="bg-muted p-3 rounded-lg border border-border">
                  <p className="text-sm text-muted-foreground">
                    <span className="font-medium">Pro Tip:</span> Use the SVG version in Canva to create custom-designed
                    QR codes that perfectly match your event's branding and color scheme!
                  </p>
                </div>
              </div>
            </section>

            <section>
              <h3 className="text-lg font-semibold mb-3 text-foreground">Exporting Guest Data</h3>
              <div className="space-y-2 text-sm text-muted-foreground">
                <p>
                  Download your complete guest list as a CSV file using the "Export Guest List" button. Open with Excel,
                  Google Sheets, or any spreadsheet application.
                </p>
                <p className="font-medium text-foreground">
                  Export includes: Guest Name, Attendance Status, Number of Guests, Email, Phone, Message, and
                  Submission Time
                </p>
              </div>
            </section>

            <section>
              <h3 className="text-lg font-semibold mb-3 text-foreground">Add to Calendar</h3>
              <div className="space-y-2 text-sm text-muted-foreground">
                <p>The "Add to Calendar" button on your invitation creates a universal .ics file that works with:</p>
                <ul className="ml-6 list-disc space-y-1">
                  <li>Apple Calendar (iPhone/iPad/Mac)</li>
                  <li>Google Calendar</li>
                  <li>Microsoft Outlook</li>
                  <li>All other standard calendar apps</li>
                </ul>
                <p>Automatically includes event name, date, time, location, and a helpful 1-hour advance reminder.</p>
              </div>
            </section>

            <section>
              <h3 className="text-lg font-semibold mb-3 text-foreground">Theme Options</h3>
              <div className="space-y-2 text-sm text-muted-foreground">
                <p>
                  Switch between light and dark themes using the theme toggle button (sun/moon icon). Your preference is
                  automatically saved to your browser.
                </p>
                <p>Both the event invitation page and dashboard support theme switching for comfortable viewing.</p>
              </div>
            </section>

            <section className="border-t border-border pt-6">
              <h3 className="text-lg font-semibold mb-4 text-foreground">Frequently Asked Questions</h3>
              <div className="bg-muted p-4 rounded-lg border border-border space-y-3">
                <div>
                  <p className="text-sm font-medium text-foreground">Can I edit my event after creating it?</p>
                  <p className="text-sm text-muted-foreground">
                    Yes! Use "Edit Event" to modify date, location, images, and most details anytime.
                  </p>
                </div>
                <div>
                  <p className="text-sm font-medium text-foreground">Can I create multiple events with the same email?</p>
                  <p className="text-sm text-muted-foreground">Create unlimited events using a single email address.</p>
                </div>
                <div>
                  <p className="text-sm font-medium text-foreground">Will my RSVP link change if I edit the event?</p>
                  <p className="text-sm text-muted-foreground">No, your link and QR code remain permanent even after edits.</p>
                </div>
                <div>
                  <p className="text-sm font-medium text-foreground">Is there a limit on the number of guests?</p>
                  <p className="text-sm text-muted-foreground">
                    No limits on total RSVPs! Each individual RSVP can include 1-10 guests.
                  </p>
                </div>
                <div>
                  <p className="text-sm font-medium text-foreground">How long does my Dashboard access last?</p>
                  <p className="text-sm text-muted-foreground">
                    Sessions remain active for 24 hours before requiring re-login for security.
                  </p>
                </div>
                <div>
                  <p className="text-sm font-medium text-foreground">Can guests edit their RSVP after submitting?</p>
                  <p className="text-sm text-muted-foreground">
                    Guests can submit a new RSVP using the same name which will update their previous response.
                  </p>
                </div>
                <div>
                  <p className="text-sm font-medium text-foreground">Is my event data secure?</p>
                  <p className="text-sm text-muted-foreground">
                    Yes, all data is securely stored in Supabase and only accessible through your verified host email.
                  </p>
                </div>
                <div>
                  <p className="text-sm font-medium text-foreground">
                    What image formats are supported for cover photos?
                  </p>
                  <p className="text-sm text-muted-foreground">
                    All standard image formats (JPG, PNG, GIF, WebP) up to 10MB in size.
                  </p>
                </div>
                <div>
                  <p className="text-sm font-medium text-foreground">Do I need to create an account?</p>
                  <p className="text-sm text-muted-foreground">
                    No account needed! Just use your email to create events and access your dashboards.
                  </p>
                </div>
              </div>
            </section>

            <section className="border-t border-border pt-6">
              <div className="bg-muted p-4 rounded-lg border border-border space-y-2">
                <p className="text-sm font-medium text-foreground">Need Help?</p>
                <p className="text-sm text-muted-foreground">Contact technical support:</p>
                <a href="mailto:sahinturkzehra@gmail.com" className="text-sm text-foreground hover:underline block">
                  sahinturkzehra@gmail.com
                </a>
                <p className="text-sm font-medium text-foreground mt-3">Visit Our Shop:</p>
                <a
                  href="https://www.etsy.com/shop/FlorMontana"
                  target="_blank"
                  rel="noopener noreferrer"
                  className="text-sm text-foreground hover:underline block"
                >
                  https://www.etsy.com/shop/FlorMontana
                </a>
              </div>
            </section>
            </div>
          </motion.div>
        </div>
      </DialogContent>
    </Dialog>
  )
}
